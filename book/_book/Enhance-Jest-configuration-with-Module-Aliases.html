
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>8. Enhance Jest configuration with Module Aliases Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Learn how to use Module Aliases Jest configuration to avoid using relative paths">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="Test-Vue-js-Slots-in-Jest.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Write-the-first-Vue-js-Component-Unit-Test-in-Jest.html">
            
                <a href="Write-the-first-Vue-js-Component-Unit-Test-in-Jest.html">
            
                    
                    1. Write the first Vue.js Component Unit Test in Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Test-Deeply-Rendered-Vue-js-Components-in-Jest.html">
            
                <a href="Test-Deeply-Rendered-Vue-js-Components-in-Jest.html">
            
                    
                    2. Test Deeply Rendered Vue.js Components in Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Test-Styles-and-Structure-of-Vue-js-Components-in-Jest.html">
            
                <a href="Test-Styles-and-Structure-of-Vue-js-Components-in-Jest.html">
            
                    
                    3. Test Styles and Structure of Vue.js Components in Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Test-Properties-and-Custom-Events-in-Vue-js-Components-with-Jest.html">
            
                <a href="Test-Properties-and-Custom-Events-in-Vue-js-Components-with-Jest.html">
            
                    
                    4. Test Properties and Custom Events in Vue.js Components with Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Test-Computed-Properties-and-Watchers-in-Vue-js-Components-with-Jest.html">
            
                <a href="Test-Computed-Properties-and-Watchers-in-Vue-js-Components-with-Jest.html">
            
                    
                    5. Test Computed Properties and Watchers in Vue.js Components with Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Test-Methods-and-Mock-Dependencies-in-Vue-js-with-Jest.html">
            
                <a href="Test-Methods-and-Mock-Dependencies-in-Vue-js-with-Jest.html">
            
                    
                    6. Test Methods and Mock Dependencies in Vue.js with Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Test-Vue-js-Slots-in-Jest.html">
            
                <a href="Test-Vue-js-Slots-in-Jest.html">
            
                    
                    7. Test Vue.js Slots in Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="Enhance-Jest-configuration-with-Module-Aliases.html">
            
                <a href="Enhance-Jest-configuration-with-Module-Aliases.html">
            
                    
                    8. Enhance Jest configuration with Module Aliases
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >8. Enhance Jest configuration with Module Aliases</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="enhance-jest-configuration-with-module-aliases">Enhance Jest configuration with Module Aliases</h1>
<p>Learn how to use Module Aliases Jest configuration to avoid using relative paths.</p>
<!-- more -->
<p>The module managers we have in the JavaScript community, mainly ES Modules and CommonJS, don&apos;t support project-based paths. They only support relative paths for our own modules, and paths for the <code>node_modules</code> folder. When a project grows a bit, it&apos;s common to see paths such:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> SomeComponent <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../../../../components/SomeComponent&apos;</span>
</code></pre>
<p>Luckily, we have different ways to cope with this, in a way that we can define aliases for folders relative to the project root, so we could the above line like:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> SomeComponent <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@/components/SomeComponent&apos;</span>
</code></pre>
<p>The <code>@</code> here is an arbitrary character to define the root project, you can define your own. Let&apos;s see what solutions we have to apply module aliasing. Let&apos;s start <a href="https://github.com/alexjoverm/vue-testing-series/tree/test-slots" target="_blank">from where we left it on the last article</a>.</p>
<h2 id="webpack-aliases">Webpack aliases</h2>
<p><a href="https://webpack.js.org/configuration/resolve/#resolve-alias" target="_blank">Webpack aliases</a> are very simple to set up. You just need to add a <code>resolve.alias</code> property in your webpack configuration. If you take a look at the <code>build/webpack.base.conf.js</code>, it already has it defined:</p>
<pre><code class="lang-javascript">{
  ...
  resolve: {
    extensions: [<span class="hljs-string">&apos;.js&apos;</span>, <span class="hljs-string">&apos;.vue&apos;</span>, <span class="hljs-string">&apos;.json&apos;</span>],
    alias: {
      <span class="hljs-string">&apos;vue$&apos;</span>: <span class="hljs-string">&apos;vue/dist/vue.esm.js&apos;</span>,
    }
  }
}
</code></pre>
<p>Taking this as an entry point, we can add a simple alias that points to the <code>src</code> folder and use that as the root:</p>
<pre><code class="lang-javascript">{
  ...
  resolve: {
    extensions: [<span class="hljs-string">&apos;.js&apos;</span>, <span class="hljs-string">&apos;.vue&apos;</span>, <span class="hljs-string">&apos;.json&apos;</span>],
    alias: {
      <span class="hljs-string">&apos;vue$&apos;</span>: <span class="hljs-string">&apos;vue/dist/vue.esm.js&apos;</span>,
      <span class="hljs-string">&apos;@&apos;</span>: path.join(__dirname, <span class="hljs-string">&apos;..&apos;</span>, <span class="hljs-string">&apos;src&apos;</span>)
    }
  }
}
</code></pre>
<p>Just with this, we can access anything taking the root project as the <code>@</code> symbol. Let&apos;s go to <code>src/App.vue</code> and change the reference to those two components:</p>
<pre><code class="lang-javascript">  <span class="hljs-keyword">import</span> MessageList <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@/components/MessageList&apos;</span>
  <span class="hljs-keyword">import</span> Message <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@/components/Message&apos;</span>
  ...
</code></pre>
<p>And if we run <code>npm start</code> and open the browser at <code>localhost:8080</code>, that should work out of the box.</p>
<p>However, if we try to run the tests by running <code>npm t</code>, we&apos;ll see Jest doesn&apos;t find the modules. We still didn&apos;t configured Jest to do so. So let&apos;s go to <code>package.json</code> where the Jest config is, and add <code>&quot;@/([^\\.]*)$&quot;: &quot;&lt;rootDir&gt;/src/$1&quot;</code> to <code>moduleNameMapper</code>:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;jest&quot;</span>: {
    <span class="hljs-string">&quot;moduleNameMapper&quot;</span>: {
      <span class="hljs-string">&quot;@(.*)$&quot;</span>: <span class="hljs-string">&quot;&lt;rootDir&gt;/src/$1&quot;</span>,
      <span class="hljs-string">&quot;^vue$&quot;</span>: <span class="hljs-string">&quot;vue/dist/vue.common.js&quot;</span>
    },
...
</code></pre>
<p>Let&apos;s explain it:</p>
<ul>
<li><code>@(.*)$</code>: Whatever starts with <code>@</code>, and continues with literally whatever (<code>(.*)$</code>) till the end of the string, grouping it by using the parenthesis</li>
<li><code>&lt;rootDir&gt;/src/$1</code>: <code>&lt;rootDir&gt;</code> is a special word of Jest, meaning the root directory. Then we map it to the <code>src</code>, and with <code>$1</code> we append the whatever clause from the <code>(.*)</code> statement.</li>
</ul>
<p>For example, <code>@/components/MessageList</code> will be mapped to <code>../src/components/MessageList</code> when you&apos;re importing it from the <code>src</code> or <code>test</code> folders.</p>
<p>That&apos;s really it. Now you can even update your <code>App.test.js</code> file to use the alias as well, since it&apos;s usable from within the tests:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { shallow } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-test-utils&quot;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/App&quot;</span>
...
</code></pre>
<p>And it will work for both <code>.vue</code> and <code>.js</code> files.</p>
<h2 id="multiple-aliases">Multiple aliases</h2>
<p>Very often, multiple aliases are used for convenience, so instead of using just a <code>@</code> to define your root folder, you use many. For example, let&apos;s say you have a <code>actions</code> and <code>models</code> folder. If you create an alias for each one, and then you move the folders around, you just need to change the aliases instead of updating all the references to it in the codebase. That&apos;s the power of module aliases, they make your codebase more maintainable and cleaner.</p>
<p>Let&apos;s add a <code>components</code> alias in <code>build/webpack.base.conf.js</code>:</p>
<pre><code class="lang-javascript">{
  ...
  resolve: {
    extensions: [<span class="hljs-string">&apos;.js&apos;</span>, <span class="hljs-string">&apos;.vue&apos;</span>, <span class="hljs-string">&apos;.json&apos;</span>],
    alias: {
      <span class="hljs-string">&apos;vue$&apos;</span>: <span class="hljs-string">&apos;vue/dist/vue.esm.js&apos;</span>,
      <span class="hljs-string">&apos;@&apos;</span>: path.join(__dirname, <span class="hljs-string">&apos;..&apos;</span>, <span class="hljs-string">&apos;src&apos;</span>)
      <span class="hljs-string">&apos;components&apos;</span>: path.join(__dirname, <span class="hljs-string">&apos;..&apos;</span>, <span class="hljs-string">&apos;src&apos;</span>, <span class="hljs-string">&apos;components&apos;</span>)
    }
  }
}
</code></pre>
<p>Then, we just need to add it as well to the Jest configuration in <code>package.json</code>:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;jest&quot;</span>: {
    <span class="hljs-string">&quot;moduleNameMapper&quot;</span>: {
      <span class="hljs-string">&quot;@(.*)$&quot;</span>: <span class="hljs-string">&quot;&lt;rootDir&gt;/src/$1&quot;</span>,
      <span class="hljs-string">&quot;components(.*)$&quot;</span>: <span class="hljs-string">&quot;&lt;rootDir&gt;/src/components/$1&quot;</span>,
      <span class="hljs-string">&quot;^vue$&quot;</span>: <span class="hljs-string">&quot;vue/dist/vue.common.js&quot;</span>
    },
...
</code></pre>
<p>As simple as that. Now, we can try in <code>App.vue</code> to use both forms:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> MessageList <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;components/MessageList&apos;</span>
<span class="hljs-keyword">import</span> Message <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@/components/Message&apos;</span>
</code></pre>
<p>Stop and re-run the tests, and that should work, as well as if you run <code>npm start</code> and try it.</p>
<h2 id="other-solutions">Other solutions</h2>
<p>I&apos;ve seen <a href="https://github.com/trayio/babel-plugin-webpack-alias" target="_blank">babel-plugin-webpack-alias</a>, specially used for other testing frameworks such as <a href="https://mochajs.org/" target="_blank">mocha</a> which doesn&apos;t have a module mapper.</p>
<p>I haven&apos;t tried it myself, since Jest already gives you that, but if you have or wanna try, please share how it went!</p>
<h2 id="conclusion">Conclusion</h2>
<p>Adding module aliases is very simple and can keep your codebase much cleaner and easier to maintain. Jest makes it as well very easy to define them, you just need to keep in in sync with the Webpack aliases, and you can say bye-bye to the dot-hell references.</p>
<p>Find the <a href="https://github.com/alexjoverm/vue-testing-series/tree/Enhance-Jest-configuration-with-Module-Aliases" target="_blank">full example on Github</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Test-Vue-js-Slots-in-Jest.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 7. Test Vue.js Slots in Jest">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"8. Enhance Jest configuration with Module Aliases","tags":["VueJS","JavaScript","Testing"],"description":"Learn how to use Module Aliases Jest configuration to avoid using relative paths","level":"1.9","depth":1,"previous":{"title":"7. Test Vue.js Slots in Jest","level":"1.8","depth":1,"path":"Test-Vue-js-Slots-in-Jest.md","ref":"Test-Vue-js-Slots-in-Jest.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":16,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Enhance-Jest-configuration-with-Module-Aliases.md","mtime":"2017-10-06T16:50:17.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-10-06T16:50:25.417Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

